import React from 'react';
import { Navigate, Outlet } from 'react-router-dom';

// üö® –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–æ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ö—É–∫ –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
function useAuth() {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞, 
    // —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ Redux
    const isAuthenticated = localStorage.getItem('authToken') !== null;
    return isAuthenticated;
}

const ProtectedRoute = () => {
    const isAuthenticated = useAuth();
    
    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–æ—á–µ—Ä–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç (Outlet)
    if (isAuthenticated) {
        return <Outlet />;
    } 
    
    // –ò–Ω–∞—á–µ, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
    return <Navigate to="/login" replace />;
};

export default ProtectedRoute;